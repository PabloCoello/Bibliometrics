---
title: "Bibliometric Analysis"
author: "Pablo Coello Pulido"
date: "22/2/2020"
output: html_document
---
# Análisis bibliométrico de palabras clave seleccionadas

```{r Load librarys, echo=FALSE, comment='', message=FALSE, warning=FALSE}
if(!require(readxl)){install.packages("readxl");library(readxl)}
if(!require(dplyr)){install.packages("dplyr");library(dplyr)}
if(!require(tidyr)){install.packages("tidyr");library(tidyr)}
if(!require(stringr)){install.packages("stringr");library(stringr)}
if(!require(bibliometrix)){install.packages("bibliometrix");library(bibliometrix)}
if(!require(xml2)){install.packages("xml2", dependencies=TRUE, INSTALL_opts = c('--no-lock'));library(xml2)}
#https://github.com/massimoaria/bibliometrix
if(!require(quanteda)){install.packages("quanteda");library(quanteda)}
if(!require(ggplot2)){install.packages("ggplot2");library(ggplot2)}
if(!require(lubridate)){install.packages("lubridate");library(lubridate)}
```

Todo el proceso explicado (más o menos) aquí: http://htmlpreview.github.io/?https://github.com/massimoaria/bibliometrix/master/vignettes/bibliometrix-vignette.html


# Read data

```{r}
setwd("~/GitHub/data/bibliometrics")
bib <- readFiles("scopus.bib")
M <- convert2df(bib, dbsource = "scopus", format = "bibtex")
```



## Análisis descriptivo

```{r echo=TRUE, message=FALSE, warning=FALSE}
results <- biblioAnalysis(M, sep = ";")
options(width=100)
S <- summary(object = results, k = 10, pause = FALSE)

knitr::kable(
  S[1]
)
```
```{r}
knitr::kable(
  S[2]
)
```

```{r}
knitr::kable(
  S[3]
)
```


```{r}
knitr::kable(
  S[5]
)
```

```{r}
knitr::kable(
  S[6]
)
```

```{r}
knitr::kable(
  S[7]
)
```
```{r}
knitr::kable(
  S[8]
)
```

```{r}
knitr::kable(
  S[9]
)
```
```{r}
knitr::kable(
  S[10]
)
```



## Temporal evolution:

```{r echo=TRUE}
plot(x = results, k = 10, pause = FALSE)
```



Manuscritos más citados

```{r}
CR <- citations(M, field = "article", sep = ";")

knitr::kable(
  cbind(CR$Cited[1:10])
)
```

Autores más citados

```{r}
CR <- citations(M, field = "author", sep = ";")
knitr::kable(
  cbind(CR$Cited[1:10])
)
```

Ráking de dominación de autores

```{r}
DF <- dominance(results, k = 10)
knitr::kable(
  DF
)
```


Índices h

```{r}
indices <- Hindex(M, field = "author", elements="BORNMANN L", sep = ";", years = 10)

# Bornmann's impact indices:
indices$H
```

Bornman citations

```{r}
# Bornmann's citations
indices$CitationList
```

Índice h de los 10 autores más productivos

```{r}
authors=gsub(","," ",names(results$Authors)[1:10])

indices <- Hindex(M, field = "author", elements=authors, sep = ";", years = 50)
knitr::kable(
  indices$H
)
```

Top autors prodicvity over time

```{r}
topAU <- authorProdOverTime(M, k = 10, graph = TRUE)
```

Table: Author's productivity per year
```{r}
knitr::kable(
  head(topAU$dfAU)
)
```

Lotka`s coefficient

```{r}
L <- lotka(results)

# Author Productivity. Empirical Distribution
knitr::kable(
  L$AuthorProd
)
```


## Network analysis

```{r}
NetMatrix <- biblioNetwork(M, analysis = "coupling", network = "authors", sep = ";")
net=networkPlot(NetMatrix, normalize = "salton", weighted=T, n = 20, labelsize=0.5,curved=TRUE,Title = "A Co-citation Network of Authors", type = "kamada", size=TRUE,remove.multiple=TRUE)
```

```{r}
netstat <- networkStat(NetMatrix)
knitr::kable(
  summary(netstat, k=10)
)
```


Country scientific collaboration

```{r}

M <- metaTagExtraction(M, Field = "AU_CO", sep = ";")
NetMatrix <- biblioNetwork(M, analysis = "collaboration", network = "countries", sep = ";")

# Plot the network
net=networkPlot(NetMatrix, n = dim(NetMatrix)[1], Title = "Country Collaboration", type = "circle", size=TRUE, remove.multiple=FALSE,labelsize=0.7,cluster="none")
```


Co citation network

```{r}

NetMatrix <- biblioNetwork(M, analysis = "co-citation", network = "references", sep = ";")

# Plot the network
net=networkPlot(NetMatrix, n = 30, Title = "Co-Citation Network", type = "fruchterman", size=T, remove.multiple=FALSE, labelsize=0.7,edgesize = 5)
```


Co ocurrences
```{r}
# Create keyword co-occurrences network

NetMatrix <- biblioNetwork(M, analysis = "co-occurrences", network = "keywords", sep = ";")

# Plot the network
net=networkPlot(NetMatrix, normalize="association", weighted=T, n = 30, Title = "Keyword Co-occurrences", type = "fruchterman", size=T,edgesize = 5,labelsize=0.7)
```

# Conceptual structure using keywords
```{r}
# Conceptual Structure using keywords (method="CA")

CS <- conceptualStructure(M,field="ID", method="CA", minDegree=4, clust=5, stemming=FALSE, labelsize=10, documents=10)
```

# Historical citation network

```{r}
# Create a historical citation network
options(width=130)
histResults <- histNetwork(M, min.citations = 10, sep = ";")
```

```{r}
net <- histPlot(histResults, n=15, size = 10, labelsize=5)
```


