---
title: "Bibliometric Analysis"
author: "Pablo Coello Pulido"
date: "22/2/2020"
output: html_document
---
# Análisis bibliométrico de palabras clave seleccionadas

```{r Load librarys, echo=FALSE, comment='', message=FALSE, warning=FALSE}
if(!require(readxl)){install.packages("readxl");library(readxl)}
if(!require(dplyr)){install.packages("dplyr");library(dplyr)}
if(!require(tidyr)){install.packages("tidyr");library(tidyr)}
if(!require(stringr)){install.packages("stringr");library(stringr)}
if(!require(bibliometrix)){install.packages("bibliometrix");library(bibliometrix)}
if(!require(xml2)){install.packages("xml2", dependencies=TRUE, INSTALL_opts = c('--no-lock'));library(xml2)}
#https://github.com/massimoaria/bibliometrix
if(!require(quanteda)){install.packages("quanteda");library(quanteda)}
if(!require(ggplot2)){install.packages("ggplot2");library(ggplot2)}
if(!require(lubridate)){install.packages("lubridate");library(lubridate)}
```

Todo el proceso explicado (más o menos) aquí: http://htmlpreview.github.io/?https://github.com/massimoaria/bibliometrix/master/vignettes/bibliometrix-vignette.html


# Read data

```{r load data, message=FALSE, warning=FALSE, include=FALSE}
setwd("~/GitHub/data/bibliometrics")
bib <- readFiles("SENTIMENT.bib")
M <- convert2df(bib, dbsource = "scopus", format = "bibtex")
```



```{r perform sumary, message=FALSE, warning=FALSE, include=FALSE}
results <- biblioAnalysis(M, sep = ";")
S <- summary(object = results, k = 10, pause = FALSE)

knitr::kable(
  S[1]
)
```
# Descriptive statistics

# Overall stats
```{r overall table, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  S[2]
)
```
## Yearly production

```{r Year production, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  S[3]
)
```


```{r Principal authors and articles, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  S[5]
)
```

```{r Main articles, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  S[6]
)
```
## Articles per country
```{r production per country, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  S[7]
)
```
## Citations per country
```{r Citations per country, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  S[8]
)
```
## Main topics
```{r main topics, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  S[9]
)
```
```{r main keywords, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  S[10]
)
```



## Temporal evolution:

```{r temporal plots, echo=FALSE, message=FALSE, warning=FALSE}
plot(x = results, k = 10, pause = FALSE)
```



## Top citations

```{r top citations, echo=FALSE, message=FALSE, warning=FALSE}
CR <- citations(M, field = "article", sep = ";")

knitr::kable(
  cbind(CR$Cited[1:10])
)
```

## Top citated authors

```{r top citated authors, echo=FALSE, message=FALSE, warning=FALSE}
CR <- citations(M, field = "author", sep = ";")
knitr::kable(
  cbind(CR$Cited[1:10])
)
```

## Dominance ranking

```{r dominance ranking, echo=FALSE, message=FALSE, warning=FALSE}
DF <- dominance(results, k = 10)
knitr::kable(
  DF
)
```


## H index

```{r h index, echo=FALSE, message=FALSE, warning=FALSE}
indices <- Hindex(M, field = "author", elements="BORNMANN L", sep = ";", years = 10)

# Bornmann's impact indices:
indices$H
```

## Bornman citations

```{r bornman citations, echo=FALSE, message=FALSE, warning=FALSE}
# Bornmann's citations
indices$CitationList
```

### H index for the 10 most productive authors

```{r h 10 most productive, echo=FALSE, message=FALSE, warning=FALSE}
authors=gsub(","," ",names(results$Authors)[1:10])

indices <- Hindex(M, field = "author", elements=authors, sep = ";", years = 50)
knitr::kable(
  indices$H
)
```

## Top autors productivity over time

```{r authors productivity over time, echo=FALSE, message=FALSE, warning=FALSE}
topAU <- authorProdOverTime(M, k = 10, graph = TRUE)
```

## Table: Author's productivity per year
```{r productivity per year, echo=FALSE, message=FALSE, warning=FALSE}
knitr::kable(
  head(topAU$dfAU)
)
```

## Lotka`s coefficient

```{r Lotka`s coefficient, echo=FALSE, message=FALSE, warning=FALSE}
L <- lotka(results)

# Author Productivity. Empirical Distribution
knitr::kable(
  L$AuthorProd
)
```


## Network analysis

```{r coupling network, echo=FALSE, message=FALSE, warning=FALSE}
NetMatrix <- biblioNetwork(M, analysis = "coupling", network = "authors", sep = ";")
net=networkPlot(NetMatrix, normalize = "salton", weighted=T, n = 20, labelsize=0.5,curved=TRUE,Title = "A Co-citation Network of Authors", type = "kamada", size=TRUE,remove.multiple=TRUE)
```

### Network stats
```{r network stats, echo=FALSE, message=FALSE, warning=FALSE}
netstat <- networkStat(NetMatrix)
knitr::kable(
  summary(netstat, k=10)
)
```


## Country scientific collaboration

```{r countries network, echo=FALSE, message=FALSE, warning=FALSE}

M <- metaTagExtraction(M, Field = "AU_CO", sep = ";")
NetMatrix <- biblioNetwork(M, analysis = "collaboration", network = "countries", sep = ";")

# Plot the network
net=networkPlot(NetMatrix, n = dim(NetMatrix)[1], Title = "Country Collaboration", type = "circle", size=TRUE, remove.multiple=FALSE,labelsize=0.7,cluster="none")
```


## Co-citation network

```{r Co-citation network, echo=FALSE, message=FALSE, warning=FALSE}

NetMatrix <- biblioNetwork(M, analysis = "co-citation", network = "references", sep = ";")

# Plot the network
net=networkPlot(NetMatrix, n = 30, Title = "Co-Citation Network", type = "fruchterman", size=T, remove.multiple=FALSE, labelsize=0.7,edgesize = 5)
```


## Co-ocurrences network
```{r co-ocurrences network, echo=FALSE, message=FALSE, warning=FALSE}
# Create keyword co-occurrences network

NetMatrix <- biblioNetwork(M, analysis = "co-occurrences", network = "keywords", sep = ";")

# Plot the network
net=networkPlot(NetMatrix, normalize="association", weighted=T, n = 30, Title = "Keyword Co-occurrences", type = "fruchterman", size=T,edgesize = 5,labelsize=0.7)
```

## Conceptual structure using keywords
```{r Conceptual structure, echo=FALSE, message=FALSE, warning=FALSE}
# Conceptual Structure using keywords (method="CA")

CS <- conceptualStructure(M,field="TI", method="CA", minDegree=4, clust=5, stemming=FALSE, labelsize=5, documents=5)
```

## Historical citation network

```{r historical network, eval=FALSE, message=FALSE, warning=FALSE, include=FALSE}
# Create a historical citation network
options(width=130)
histResults <- histNetwork(M, min.citations = 10, sep = ";")
```


```{r network result, eval=FALSE, message=FALSE, warning=FALSE, include=FALSE}
net <- histPlot(histResults, n=15, size = 10, labelsize=5)
```


